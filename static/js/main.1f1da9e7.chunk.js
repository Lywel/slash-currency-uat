(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t,a){},126:function(e,t,a){"use strict";(function(e){var n=a(27),l=a(5),c=a(6),r=a(8),o=a(7),s=a(9),i=a(1),u=a.n(i),d=a(3),h=(a(123),function(t){function a(){return Object(l.a)(this,a),Object(r.a)(this,Object(o.a)(a).apply(this,arguments))}return Object(s.a)(a,t),Object(c.a)(a,[{key:"render",value:function(){var t=this.props.chain;return u.a.createElement(d.c,{className:"TransactionsCard",color:"dark"},u.a.createElement(d.w,null,u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"From"),u.a.createElement("th",null,"To"),u.a.createElement("th",null,"Amount"))),u.a.createElement("tbody",null,t&&t.map(function(e){return e.transactions}).reduce(function(e,t){return Object(n.a)(e).concat(Object(n.a)(t))},[]).map(function(t,a){return u.a.createElement("tr",{key:a},u.a.createElement("td",null,e.from(t.from).toString("hex").substring(0,20)),u.a.createElement("td",null,e.from(t.to).toString("hex").substring(0,20)),u.a.createElement("td",null,t.amount))}).reverse())))}}]),a}(i.Component));t.a=h}).call(this,a(73).Buffer)},127:function(e,t,a){e.exports=a(287)},132:function(e,t,a){},134:function(e,t,a){},136:function(e,t,a){},143:function(e,t,a){},145:function(e,t,a){},278:function(e,t,a){},281:function(e,t,a){},283:function(e,t,a){},287:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),c=a(15),r=a.n(c),o=(a(132),a(5)),s=a(6),i=a(8),u=a(7),d=a(9),h=(a(134),a(46)),m=a(4),p=a(3),b=(a(136),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={url:a.props.url},a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.handleKeyPress=a.handleKeyPress.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(h.a)({},this.state,{url:e.target.value}))}},{key:"handleKeyPress",value:function(e){if("Enter"===e.key){if("connected"===this.props.status&&this.props.url===this.state.url)return;this.props.onChange(this.state.url)}}},{key:"render",value:function(){var e=this.props,t=e.status,a=e.onChange,n=this.state.url,c={connected:"success",connecting:"warning",disconnected:"danger"}[t];return l.a.createElement("div",{className:"Navigation "+t},l.a.createElement("h1",null,"Validator UAT"),l.a.createElement(p.r,{dark:!0,expand:"md"},l.a.createElement(p.s,null,"Validator"),l.a.createElement(p.h,null,l.a.createElement(p.i,{addonType:"prepend"},l.a.createElement(p.a,{color:c}," ")),l.a.createElement(p.g,{value:n,onChange:this.handleChange,onKeyPress:this.handleKeyPress}),l.a.createElement(p.i,{addonType:"append"},l.a.createElement(p.b,{onClick:function(){return a(n)},disabled:"connected"===t&&this.props.url===this.state.url},"connected"===t?this.props.url!==this.state.url?"Change":"Connected":"Connect")))))}}]),t}(n.Component)),f=a(27),E=a(18),O=a(14),v=a(45);a(145);function j(e){switch(e){case"ibftEventIn":return{color:"primary",icon:O.c};case"ibftEventOut":return{color:"info",icon:O.b};case"txEvent":return{color:"success",icon:O.d};default:return{color:"dark",icon:O.a}}}var g=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={detailsModalOpen:!1,details:null},a.openDetailsModal=a.openDetailsModal.bind(Object(m.a)(Object(m.a)(a))),a.closeDetailsModal=a.closeDetailsModal.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"openDetailsModal",value:function(e){var t=this;return function(){t.setState({detailsModalOpen:!0,details:e})}}},{key:"closeDetailsModal",value:function(){this.setState({detailsModalOpen:!1})}},{key:"render",value:function(){var e=this,t=this.props.logs.map(function(t,a){return l.a.createElement(p.k,{key:a,color:j(t.type).color},l.a.createElement(p.b,{color:"link",onClick:e.openDetailsModal(t)},l.a.createElement(O.e,{icon:j(t.type).icon}),function(){switch(t.dataType){case"core.RequestEvent":return"Proposal: block";default:return t.dataType||t.type}}()))}),a=this.state,n=a.details,c=a.detailsModalOpen;return l.a.createElement("div",{className:"LiveLogs h-100"},l.a.createElement(v.a,{isOpen:c,toggle:this.closeDetailsModal,details:n}),l.a.createElement(p.j,null,t))}}]),t}(n.Component),k=a(125),y=a.n(k),w=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).options={layout:{improvedLayout:!0},edges:{shadow:!0,smooth:!0},nodes:{shape:"hexagon",shadow:!0,size:20,font:{color:"white"}},autoResize:!0},a.events={select:function(e){var t=e.nodes;a.props.onNodeSelect(t[0])}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.graph;return l.a.createElement("div",{className:"NetworkTopo"},l.a.createElement(y.a,{graph:e,options:this.options,events:this.events,style:{height:"100%",width:"100%"}}))}}]),t}(n.Component),S=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.node;return l.a.createElement("div",{className:"NetworkDetails"},l.a.createElement(p.c,{body:!0,color:"dark"},l.a.createElement(p.d,null,"Validator details"),l.a.createElement("ul",null,e?Object.entries(e).map(function(e,t){var a=Object(E.a)(e,2),n=a[0],c=a[1];return l.a.createElement("li",{key:t},l.a.createElement("strong",null,n,": "),c)}):"Please select a node")))}}]),t}(n.Component),C=(a(278),a(123),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={detailsModalOpen:!1,details:null},a.openDetailsModal=a.openDetailsModal.bind(Object(m.a)(Object(m.a)(a))),a.closeDetailsModal=a.closeDetailsModal.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"openDetailsModal",value:function(e){var t=this;return function(){t.setState({detailsModalOpen:!0,details:e})}}},{key:"closeDetailsModal",value:function(){this.setState({detailsModalOpen:!1})}},{key:"render",value:function(){var e=this,t=this.props.chain,a=this.state,n=a.detailsModalOpen,c=a.details;return l.a.createElement(p.c,{className:"BlockchainCard",color:"dark"},l.a.createElement(v.a,{isOpen:n,toggle:this.closeDetailsModal,details:c,type:"block"}),l.a.createElement(p.w,null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"PrevHash"),l.a.createElement("th",null,"tx#"))),l.a.createElement("tbody",null,t&&t.slice(-50).map(function(t,a){return t.header&&l.a.createElement("tr",{key:a},l.a.createElement("td",null,l.a.createElement(p.b,{color:"link",onClick:e.openDetailsModal(t)},t.header.number)),l.a.createElement("td",null,l.a.createElement(p.a,{pill:!0},t.header.parenthash)),l.a.createElement("td",null,t.transactions.length))}).reverse())))}}]),t}(n.Component)),N=a(126),T=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).toggle=a.toggle.bind(Object(m.a)(Object(m.a)(a))),a.state={activeTab:"1"},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"toggle",value:function(e){this.state.activeTab!==e&&this.setState({activeTab:e})}},{key:"render",value:function(){var e=this,t=this.state.activeTab,a=this.props.chain;return l.a.createElement("div",{className:"History h-100"},l.a.createElement(p.o,{justified:!0,pills:!0},l.a.createElement(p.p,null,l.a.createElement(p.q,{className:"1"===t?"active ":"",onClick:function(){e.toggle("1")}},"Blockchain")),l.a.createElement(p.p,null,l.a.createElement(p.q,{className:"2"===t?"active ":"",onClick:function(){e.toggle("2")}},"Transactions"))),l.a.createElement(p.u,{activeTab:t},l.a.createElement(p.v,{tabId:"1"},l.a.createElement(C,{chain:a})),l.a.createElement(p.v,{tabId:"2"},l.a.createElement(N.a,{chain:a}))))}}]),t}(n.Component),M=(a(281),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={logs:[],status:"disconnected",failed:!1,nodes:[],edges:[],ws:null,tries:0,selectedNetworkNode:null,updateTopoInter:null,updateBlockchainInter:null,chain:null},a.connect=a.connect.bind(Object(m.a)(Object(m.a)(a))),a.connectionStatusChanged=a.connectionStatusChanged.bind(Object(m.a)(Object(m.a)(a))),a.updateNetworkTopo=a.updateNetworkTopo.bind(Object(m.a)(Object(m.a)(a))),a.updateBlockchain=a.updateBlockchain.bind(Object(m.a)(Object(m.a)(a))),a.onNodeSelect=a.onNodeSelect.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.connect(this.props.url),this.setState({updateTopoInter:setInterval(this.updateNetworkTopo,1e3),updateBlockchainInter:setInterval(this.updateBlockchain,5e3)})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.url!==e.url?this.setState({tries:0},function(){return t.connect(t.props.url)}):"disconnected"===this.state.status&&this.state.tries<3&&this.connect(this.props.url)}},{key:"connectionStatusChanged",value:function(e){this.setState({status:e}),this.props.onStateChange(e)}},{key:"connect",value:function(e){var t=this;if(this.setState({tries:this.state.tries+1}),this.state.ws&&"disconnected"!==this.state.status){var a=this.state.ws;a.onopen=null,a.onclose=null,a.close()}this.connectionStatusChanged("connecting");var n=new WebSocket("ws://"+e);n.onmessage=function(e){var a=JSON.parse(e.data);switch(a.type){case"network-state":var n=Object.entries(a.data).map(function(e,t){var a=Object(E.a)(e,2),n=a[0],l=a[1],c={id:t,label:l.split(":")[0]||"THIS",address:n,networkAddress:l};return":8080"===l&&(c.color="green",c.fixed=!0),c}),l=n.filter(function(e){return 1!==e.id}).map(function(e){return{to:1,from:e.id}});t.setState({edges:l,nodes:n});break;default:a.date=Date.now();var c=Object(f.a)(t.state.logs).concat([a]).sort(function(e,t){return t.date-e.date}).slice(0,20);t.setState({logs:c})}},n.onopen=function(e){if(n.url!=="ws://"+t.props.url)return n.close();t.connectionStatusChanged("connected"),t.setState({logs:[],failed:!1}),t.updateNetworkTopo()},n.onerror=function(e){if(n.url!=="ws://"+t.props.url)return n.close();t.connectionStatusChanged("disconnected"),t.state.ws.close()},n.onclose=function(e){n.url==="ws://"+t.props.url&&t.connectionStatusChanged("disconnected")},this.setState({ws:n})}},{key:"updateNetworkTopo",value:function(){"connected"===this.state.status&&this.state.ws.url==="ws://"+this.props.url&&this.state.ws.send(JSON.stringify({type:"network-state"}))}},{key:"updateBlockchain",value:function(){var e=this;fetch("http://"+this.props.url.split("/")[0]+"/state").then(function(e){return e.json()}).then(function(t){e.setState({chain:t.blockchain})})}},{key:"onNodeSelect",value:function(e){this.setState({selectedNetworkNode:this.state.nodes[e]})}},{key:"render",value:function(){var e=this.state,t=e.logs,a=e.status,n=e.nodes,c=e.edges,r=e.selectedNetworkNode,o=e.chain;return l.a.createElement(p.f,{fluid:!0,className:"MainPage "+a},l.a.createElement(p.t,{className:"h-100"},l.a.createElement(p.e,{md:"2",className:"h-100"},l.a.createElement(g,{logs:t}),l.a.createElement("h2",null,"Live logs")),l.a.createElement(p.e,{md:"6",className:"h-100"},l.a.createElement(w,{graph:{nodes:n,edges:c},onNodeSelect:this.onNodeSelect}),l.a.createElement(S,{node:r}),l.a.createElement("h2",null,"Network topology")),l.a.createElement(p.e,{md:"4",className:"h-100"},l.a.createElement(T,{chain:o}))))}}]),t}(n.Component)),D=(a(283),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={node_url:"a263d53aae7c911e8a7a9069f40f5f2f-415446416.ap-southeast-1.elb.amazonaws.com:3000/ws",conn_status:"disconnected"},a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.handleStateChange=a.handleStateChange.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState({node_url:e})}},{key:"handleStateChange",value:function(e){this.setState(Object(h.a)({},this.state,{conn_status:e}))}},{key:"render",value:function(){var e=this.state,t=e.node_url,a=e.conn_status;return l.a.createElement("div",{className:"Dashboard"},l.a.createElement(b,{url:t,status:a,onChange:this.handleChange}),l.a.createElement(M,{url:t,onStateChange:this.handleStateChange}))}}]),t}(n.Component)),B=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement(D,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(285);r.a.render(l.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},45:function(e,t,a){"use strict";(function(e){var n=a(5),l=a(6),c=a(8),r=a(7),o=a(9),s=a(18),i=a(14),u=a(1),d=a.n(u),h=a(3);a(143);function m(t){var a=t.header,n=t.transactions;return d.a.createElement(d.a.Fragment,null,d.a.createElement("h3",null,"Proposal: block"),d.a.createElement(h.w,{striped:!0,size:"sm"},d.a.createElement("tbody",null,Object.entries(a).map(function(e,t){var a=Object(s.a)(e,2),n=a[0],l=a[1];return d.a.createElement("tr",{key:t},d.a.createElement("th",null,n),d.a.createElement("td",null,l))}))),d.a.createElement("h4",null,"Transactions"),d.a.createElement(h.w,{striped:!0,size:"sm"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"From"),d.a.createElement("th",null,"To"),d.a.createElement("th",null,"Amount"))),d.a.createElement("tbody",null,n.map(function(t,a){return d.a.createElement("tr",{key:a},d.a.createElement("td",null,e.from(t.from).toString("hex").substring(0,16)),d.a.createElement("td",null,e.from(t.to).toString("hex").substring(0,16)),d.a.createElement("td",null,t.amount))}))))}var p=function(t){function a(){return Object(n.a)(this,a),Object(c.a)(this,Object(r.a)(a).apply(this,arguments))}return Object(o.a)(a,t),Object(l.a)(a,[{key:"render",value:function(){var t=this.props,a=t.isOpen,n=t.toggle,l=t.details,c=t.type,r=l?function(t,a){switch(a){case"block":return m(t);case"core.RequestEvent":return m(t.data.Proposal);case"types.Transaction":return d.a.createElement(d.a.Fragment,null,d.a.createElement("h3",null,"Transaction"),d.a.createElement(h.w,{striped:!0,size:"sm"},d.a.createElement("tbody",null,Object.entries(t.data).map(function(t,a){var n=Object(s.a)(t,2),l=n[0],c=n[1];return d.a.createElement("tr",{key:a},d.a.createElement("th",null,l),d.a.createElement("td",null,"from"===l||"to"===l?e.from(c).toString("hex"):c))}))));default:return d.a.createElement("pre",null,JSON.stringify(t,null,2))}}(l,c||l.dataType):null;return d.a.createElement("div",null,d.a.createElement(h.l,{isOpen:a,toggle:n,size:"lg"},l?d.a.createElement(d.a.Fragment,null,d.a.createElement(h.n,{toggle:n},"ibftEventIn"===l.type?d.a.createElement(i.e,{icon:i.b}):d.a.createElement(i.e,{icon:i.c}),l.dataType||l.type),d.a.createElement(h.m,null,r)):""))}}]),a}(u.Component);t.a=p}).call(this,a(73).Buffer)}},[[127,2,1]]]);
//# sourceMappingURL=main.1f1da9e7.chunk.js.map