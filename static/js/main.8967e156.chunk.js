(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,n){},124:function(e,t,n){"use strict";(function(e){var a=n(5),c=n(6),r=n(8),l=n(7),o=n(9),s=n(18),i=n(14),u=n(1),d=n.n(u),h=n(3);n(143);var m=function(t){function n(){return Object(a.a)(this,n),Object(r.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(o.a)(n,t),Object(c.a)(n,[{key:"render",value:function(){var t=this.props,n=t.isOpen,a=t.toggle,c=t.details,r=c?function(t){switch(t.dataType){case"core.RequestEvent":var n=t.data.Proposal,a=n.block,c=n.transactions;return d.a.createElement(d.a.Fragment,null,d.a.createElement("h3",null,"Proposal: block"),d.a.createElement(h.w,{striped:!0,size:"sm"},d.a.createElement("tbody",null,Object.entries(a).map(function(e,t){var n=Object(s.a)(e,2),a=n[0],c=n[1];return d.a.createElement("tr",{key:t},d.a.createElement("th",null,a),d.a.createElement("td",null,c))}))),d.a.createElement("h4",null,"Transactions"),d.a.createElement(h.w,{striped:!0,size:"sm"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"From"),d.a.createElement("th",null,"To"),d.a.createElement("th",null,"Amount"))),d.a.createElement("tbody",null,c.map(function(t,n){return d.a.createElement("tr",{key:n},d.a.createElement("td",null,e.from(t.from).toString("hex").substring(0,16)),d.a.createElement("td",null,e.from(t.to).toString("hex").substring(0,16)),d.a.createElement("td",null,t.amount))}))));case"types.Transaction":return console.log(t),d.a.createElement(d.a.Fragment,null,d.a.createElement("h3",null,"Transaction"),d.a.createElement(h.w,{striped:!0,size:"sm"},d.a.createElement("tbody",null,Object.entries(t.data).map(function(t,n){var a=Object(s.a)(t,2),c=a[0],r=a[1];return d.a.createElement("tr",{key:n},d.a.createElement("th",null,c),d.a.createElement("td",null,"from"===c||"to"===c?e.from(r).toString("hex"):r))}))));default:return d.a.createElement("pre",null,JSON.stringify(t,null,2))}}(c):null;return d.a.createElement("div",null,d.a.createElement(h.l,{isOpen:n,toggle:a,size:"lg"},c?d.a.createElement(d.a.Fragment,null,d.a.createElement(h.n,{toggle:a},"ibftEventIn"===c.type?d.a.createElement(i.e,{icon:i.b}):d.a.createElement(i.e,{icon:i.c}),c.dataType||c.type),d.a.createElement(h.m,null,r)):""))}}]),n}(u.Component);t.a=m}).call(this,n(72).Buffer)},126:function(e,t,n){"use strict";(function(e){var a=n(27),c=n(5),r=n(6),l=n(8),o=n(7),s=n(9),i=n(1),u=n.n(i),d=n(3),h=(n(122),function(t){function n(){return Object(c.a)(this,n),Object(l.a)(this,Object(o.a)(n).apply(this,arguments))}return Object(s.a)(n,t),Object(r.a)(n,[{key:"render",value:function(){var t=this.props.chain;return u.a.createElement(d.c,{className:"TransactionsCard",color:"dark"},u.a.createElement(d.w,null,u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"From"),u.a.createElement("th",null,"To"),u.a.createElement("th",null,"Amount"))),u.a.createElement("tbody",null,t&&t.map(function(e){return e.transactions}).reduce(function(e,t){return Object(a.a)(e).concat(Object(a.a)(t))},[]).map(function(t,n){return u.a.createElement("tr",{key:n},u.a.createElement("td",null,e.from(t.from).toString("hex").substring(0,20)),u.a.createElement("td",null,e.from(t.to).toString("hex").substring(0,20)),u.a.createElement("td",null,t.amount))}).reverse())))}}]),n}(i.Component));t.a=h}).call(this,n(72).Buffer)},127:function(e,t,n){e.exports=n(287)},132:function(e,t,n){},134:function(e,t,n){},136:function(e,t,n){},143:function(e,t,n){},145:function(e,t,n){},278:function(e,t,n){},281:function(e,t,n){},283:function(e,t,n){},287:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(15),l=n.n(r),o=(n(132),n(5)),s=n(6),i=n(8),u=n(7),d=n(9),h=(n(134),n(45)),m=n(4),p=n(3),b=(n(136),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={url:n.props.url},n.handleChange=n.handleChange.bind(Object(m.a)(Object(m.a)(n))),n.handleKeyPress=n.handleKeyPress.bind(Object(m.a)(Object(m.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(h.a)({},this.state,{url:e.target.value}))}},{key:"handleKeyPress",value:function(e){if("Enter"===e.key){if("connected"===this.props.status&&this.props.url===this.state.url)return;this.props.onChange(this.state.url)}}},{key:"render",value:function(){var e=this.props,t=e.status,n=e.onChange,a=this.state.url,r={connected:"success",connecting:"warning",disconnected:"danger"}[t];return c.a.createElement("div",{className:"Navigation "+t},c.a.createElement("h1",null,"Validator UAT"),c.a.createElement(p.r,{dark:!0,expand:"md"},c.a.createElement(p.s,null,"Validator"),c.a.createElement(p.h,null,c.a.createElement(p.i,{addonType:"prepend"},c.a.createElement(p.a,{color:r}," ")),c.a.createElement(p.g,{value:a,onChange:this.handleChange,onKeyPress:this.handleKeyPress}),c.a.createElement(p.i,{addonType:"append"},c.a.createElement(p.b,{onClick:function(){return n(a)},disabled:"connected"===t&&this.props.url===this.state.url},"connected"===t?this.props.url!==this.state.url?"Change":"Connected":"Connect")))))}}]),t}(a.Component)),f=n(27),E=n(18),v=n(14),O=n(124);n(145);function g(e){switch(e){case"ibftEventIn":return{color:"primary",icon:v.c};case"ibftEventOut":return{color:"info",icon:v.b};case"txEvent":return{color:"success",icon:v.d};default:return{color:"dark",icon:v.a}}}var j=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={detailsModalOpen:!1,details:null},n.openDetailsModal=n.openDetailsModal.bind(Object(m.a)(Object(m.a)(n))),n.closeDetailsModal=n.closeDetailsModal.bind(Object(m.a)(Object(m.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"openDetailsModal",value:function(e){var t=this;return function(){t.setState({detailsModalOpen:!0,details:e})}}},{key:"closeDetailsModal",value:function(){this.setState({detailsModalOpen:!1})}},{key:"render",value:function(){var e=this,t=this.props.logs.map(function(t,n){return c.a.createElement(p.k,{key:n,color:g(t.type).color},c.a.createElement(p.b,{color:"link",onClick:e.openDetailsModal(t)},c.a.createElement(v.e,{icon:g(t.type).icon}),function(){switch(t.dataType){case"core.RequestEvent":return"Proposal: block";default:return t.dataType||t.type}}()))}),n=this.state,a=n.details,r=n.detailsModalOpen;return c.a.createElement("div",{className:"LiveLogs h-100"},c.a.createElement(O.a,{isOpen:r,toggle:this.closeDetailsModal,details:a}),c.a.createElement(p.j,null,t))}}]),t}(a.Component),k=n(125),y=n.n(k),w=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).options={layout:{improvedLayout:!0},edges:{shadow:!0,smooth:!0},nodes:{shape:"hexagon",shadow:!0,size:20,font:{color:"white"}},autoResize:!0},n.events={select:function(e){var t=e.nodes;n.props.onNodeSelect(t[0])}},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.graph;return c.a.createElement("div",{className:"NetworkTopo"},c.a.createElement(y.a,{graph:e,options:this.options,events:this.events,style:{height:"100%",width:"100%"}}))}}]),t}(a.Component),C=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.node;return c.a.createElement("div",{className:"NetworkDetails"},c.a.createElement(p.c,{body:!0,color:"dark"},c.a.createElement(p.d,null,"Validator details"),c.a.createElement("ul",null,e?Object.entries(e).map(function(e,t){var n=Object(E.a)(e,2),a=n[0],r=n[1];return c.a.createElement("li",{key:t},c.a.createElement("strong",null,a,": "),r)}):"Please select a node")))}}]),t}(a.Component),S=(n(278),n(122),function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.chain;return c.a.createElement(p.c,{className:"BlockchainCard",color:"dark"},c.a.createElement(p.j,null,e&&e.map(function(e,t){return c.a.createElement(p.k,{key:t,color:"dark"},c.a.createElement("strong",{className:"mr-3"},e.block.number),c.a.createElement("span",null,e.block.parenthash||"Previous block hash"))}).reverse()))}}]),t}(a.Component)),N=n(126),T=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).toggle=n.toggle.bind(Object(m.a)(Object(m.a)(n))),n.state={activeTab:"1"},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"toggle",value:function(e){this.state.activeTab!==e&&this.setState({activeTab:e})}},{key:"render",value:function(){var e=this,t=this.state.activeTab,n=this.props.chain;return c.a.createElement("div",{className:"History h-100"},c.a.createElement(p.o,{justified:!0,pills:!0},c.a.createElement(p.p,null,c.a.createElement(p.q,{className:"1"===t?"active ":"",onClick:function(){e.toggle("1")}},"Blockchain")),c.a.createElement(p.p,null,c.a.createElement(p.q,{className:"2"===t?"active ":"",onClick:function(){e.toggle("2")}},"Transactions"))),c.a.createElement(p.u,{activeTab:t},c.a.createElement(p.v,{tabId:"1"},c.a.createElement(S,{chain:n})),c.a.createElement(p.v,{tabId:"2"},c.a.createElement(N.a,{chain:n}))))}}]),t}(a.Component),M=(n(281),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={logs:[],status:"disconnected",failed:!1,nodes:[],edges:[],ws:null,tries:0,selectedNetworkNode:null,updateTopoInter:null,updateBlockchainInter:null,chain:null},n.connect=n.connect.bind(Object(m.a)(Object(m.a)(n))),n.connectionStatusChanged=n.connectionStatusChanged.bind(Object(m.a)(Object(m.a)(n))),n.updateNetworkTopo=n.updateNetworkTopo.bind(Object(m.a)(Object(m.a)(n))),n.updateBlockchain=n.updateBlockchain.bind(Object(m.a)(Object(m.a)(n))),n.onNodeSelect=n.onNodeSelect.bind(Object(m.a)(Object(m.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.connect(this.props.url),this.setState({updateTopoInter:setInterval(this.updateNetworkTopo,1e3),updateBlockchainInter:setInterval(this.updateBlockchain,1e3)})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.url!==e.url?this.setState({tries:0},function(){return t.connect(t.props.url)}):"disconnected"===this.state.status&&this.state.tries<3&&this.connect(this.props.url)}},{key:"connectionStatusChanged",value:function(e){this.setState({status:e}),this.props.onStateChange(e)}},{key:"connect",value:function(e){var t=this;if(this.setState({tries:this.state.tries+1}),this.state.ws&&"disconnected"!==this.state.status){var n=this.state.ws;n.onopen=null,n.onclose=null,n.close()}this.connectionStatusChanged("connecting");var a=new WebSocket("ws://"+e);a.onmessage=function(e){var n=JSON.parse(e.data);switch(n.type){case"network-state":var a=Object.entries(n.data).map(function(e,t){var n=Object(E.a)(e,2),a=n[0],c=n[1],r={id:t,label:c.split(":")[0]||"THIS",address:a,networkAddress:c};return":8080"===c&&(r.color="green",r.fixed=!0),r}),c=a.filter(function(e){return 1!==e.id}).map(function(e){return{to:1,from:e.id}});t.setState({edges:c,nodes:a});break;default:n.date=Date.now();var r=Object(f.a)(t.state.logs).concat([n]).sort(function(e,t){return t.date-e.date}).slice(0,20);t.setState({logs:r})}},a.onopen=function(e){if(a.url!=="ws://"+t.props.url)return a.close();t.connectionStatusChanged("connected"),t.setState({logs:[],failed:!1}),t.updateNetworkTopo()},a.onerror=function(e){if(a.url!=="ws://"+t.props.url)return a.close();t.connectionStatusChanged("disconnected"),t.state.ws.close()},a.onclose=function(e){a.url==="ws://"+t.props.url&&t.connectionStatusChanged("disconnected")},this.setState({ws:a})}},{key:"updateNetworkTopo",value:function(){"connected"===this.state.status&&this.state.ws.url==="ws://"+this.props.url&&this.state.ws.send(JSON.stringify({type:"network-state"}))}},{key:"updateBlockchain",value:function(){var e=this;fetch("http://"+this.props.url.split("/")[0]+"/state").then(function(e){return e.json()}).then(function(t){e.setState({chain:t.blockchain})})}},{key:"onNodeSelect",value:function(e){this.setState({selectedNetworkNode:this.state.nodes[e]})}},{key:"render",value:function(){var e=this.state,t=e.logs,n=e.status,a=e.nodes,r=e.edges,l=e.selectedNetworkNode,o=e.chain;return c.a.createElement(p.f,{fluid:!0,className:"MainPage "+n},c.a.createElement(p.t,{className:"h-100"},c.a.createElement(p.e,{md:"2",className:"h-100"},c.a.createElement(j,{logs:t}),c.a.createElement("h2",null,"Live logs")),c.a.createElement(p.e,{md:"6",className:"h-100"},c.a.createElement(w,{graph:{nodes:a,edges:r},onNodeSelect:this.onNodeSelect}),c.a.createElement(C,{node:l}),c.a.createElement("h2",null,"Network topology")),c.a.createElement(p.e,{md:"4",className:"h-100"},c.a.createElement(T,{chain:o}))))}}]),t}(a.Component)),D=(n(283),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={node_url:"a263d53aae7c911e8a7a9069f40f5f2f-415446416.ap-southeast-1.elb.amazonaws.com:3000/ws",conn_status:"disconnected"},n.handleChange=n.handleChange.bind(Object(m.a)(Object(m.a)(n))),n.handleStateChange=n.handleStateChange.bind(Object(m.a)(Object(m.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState({node_url:e})}},{key:"handleStateChange",value:function(e){this.setState(Object(h.a)({},this.state,{conn_status:e}))}},{key:"render",value:function(){var e=this.state,t=e.node_url,n=e.conn_status;return c.a.createElement("div",{className:"Dashboard"},c.a.createElement(b,{url:t,status:n,onChange:this.handleChange}),c.a.createElement(M,{url:t,onStateChange:this.handleStateChange}))}}]),t}(a.Component)),B=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement(D,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(285);l.a.render(c.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[127,2,1]]]);
//# sourceMappingURL=main.8967e156.chunk.js.map