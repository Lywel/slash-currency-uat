(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t,n){e.exports=n(275)},128:function(e,t,n){},130:function(e,t,n){},132:function(e,t,n){},136:function(e,t,n){},269:function(e,t,n){},271:function(e,t,n){},275:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),s=n(15),c=n.n(s),r=(n(128),n(9)),i=n(10),l=n(12),u=n(11),d=n(13),h=(n(130),n(14)),p=n(4),g=n(3),m=(n(132),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={url:n.props.url},n.handleChange=n.handleChange.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(h.a)({},this.state,{url:e.target.value}))}},{key:"render",value:function(){var e=this.props,t=e.status,n=e.onChange,a=this.state.url,s={connected:"success",connecting:"warning",disconnected:"danger"}[t];return o.a.createElement("div",{className:"Navigation "+t},o.a.createElement("h1",null,"Validator UAT"),o.a.createElement(g.k,{dark:!0,expand:"md"},o.a.createElement(g.l,null,"Validator"),o.a.createElement(g.i,null,o.a.createElement(g.j,{addonType:"prepend"},o.a.createElement(g.a,{color:s}," ")),o.a.createElement(g.h,{value:a,onChange:this.handleChange}),o.a.createElement(g.j,{addonType:"append"},o.a.createElement(g.b,{onClick:function(){return n(a)},disabled:"connected"===t&&this.props.url===this.state.url},"connected"===t?this.props.url!==this.state.url?"Change":"Connected":"Connect")))))}}]),t}(a.Component)),b=n(122),f=n(44),j=n(25),O=(n(136),function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.logs.reverse().map(function(e,t){return o.a.createElement("div",{key:t},o.a.createElement(g.c,{className:"text-white bg-dark"},o.a.createElement(g.e,{id:"log-toggler-"+t},"ibftEventIn"===e.type?o.a.createElement(j.c,{icon:j.a}):o.a.createElement(j.c,{icon:j.b}),e.dataType||e.type),o.a.createElement(g.n,{toggler:"#log-toggler-"+t},o.a.createElement(g.d,null,"string"===typeof e.data?e.data:Object.entries(e.data).map(function(e,t){var n=Object(f.a)(e,2),a=n[0],s=n[1];switch(a){case"Address":case"Dest":s=s.map(function(e){return e.toString(16)}).join("");break;default:s=JSON.stringify(s)}return o.a.createElement("p",{key:t},o.a.createElement("strong",null,a,": "),o.a.createElement("span",null,s))})))))});return o.a.createElement("div",{className:"LiveLogs h-100"},o.a.createElement("h3",null,"Live logs"),o.a.createElement("div",null,e))}}]),t}(a.Component)),v=n(121),E=n.n(v),w=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).options={layout:{improvedLayout:!0},edges:{shadow:!0,smooth:!0},nodes:{shape:"hexagon",shadow:!0,size:40,font:{color:"white"}},autoResize:!0},n.events={select:function(e){var t=e.nodes,n=e.edges;console.log("Selected nodes:"),console.log(t),console.log("Selected edges:"),console.log(n)}},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.graph;return o.a.createElement("div",{className:"NetworkTopo h-100"},o.a.createElement(E.a,{graph:e,options:this.options,events:this.events,style:{height:"100%",width:"100%"}}))}}]),t}(a.Component),k=(n(269),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={logs:[],status:"disconnected",failed:!1,nodes:[],edges:[]},n.connect=n.connect.bind(Object(p.a)(Object(p.a)(n))),n.connectionStatusChanged=n.connectionStatusChanged.bind(Object(p.a)(Object(p.a)(n))),n.updateNetworkTopo=n.updateNetworkTopo.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.connect(this.props.url)}},{key:"componentDidUpdate",value:function(e){this.props.url!==e.url&&this.setState(Object(h.a)({},this.state,{tries:0})),(this.props.url!==e.url||"disconnected"===this.state.status&&this.state.tries<3)&&this.connect(this.props.url)}},{key:"connectionStatusChanged",value:function(e){this.setState(Object(h.a)({},this.state,{status:e})),this.props.onStateChange(e)}},{key:"connect",value:function(e){var t=this;this.setState(Object(h.a)({},this.state,{tries:this.tries+1})),this.connectionStatusChanged("connecting");var n=new WebSocket("ws://"+e);n.onmessage=function(e){console.log("onmessage:",e.data);var n=JSON.parse(e.data);switch(n.type){case"network-state":var a=Object.entries(n.data).map(function(e,t){var n=Object(f.a)(e,2),a=n[0],o=n[1],s={id:t,label:o.split(":")[0]||"THIS",address:a,networkAddress:o};return":8080"===o&&(s.color="green",s.fixed=!0),s});console.log(a);var o=a.filter(function(e){return 1!==e.id}).map(function(e){return{to:1,from:e.id}});t.setState(Object(h.a)({},t.state,{edges:o,nodes:a}));break;default:t.setState(function(e){return{logs:Object(b.a)(e.logs).concat([n])}})}},n.onopen=function(e){t.connectionStatusChanged("connected"),t.setState(Object(h.a)({},t.state,{logs:[],failed:!1})),t.updateNetworkTopo()},n.onerror=function(e){t.connectionStatusChanged("disconnected"),t.ws.close(),t.setState(Object(h.a)({},t.state,{logs:[],failed:!0}))},n.onclose=function(e){t.connectionStatusChanged("disconnected"),t.ws.close(),t.setState(Object(h.a)({},t.state,{logs:[],failed:!0}))},this.ws=n}},{key:"updateNetworkTopo",value:function(){this.ws.send(JSON.stringify({type:"network-state"}))}},{key:"render",value:function(){var e=this.state,t=e.logs,n=e.status,a=e.nodes,s=e.edges;return o.a.createElement(g.g,{fluid:!0,className:"MainPage "+n},o.a.createElement(g.m,{className:"h-100"},o.a.createElement(g.f,{md:"3",className:"h-100"},o.a.createElement(O,{logs:t})),o.a.createElement(g.f,{md:"9",className:"h-100"},o.a.createElement(w,{graph:{nodes:a,edges:s}}))))}}]),t}(a.Component)),y=(n(271),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={node_url:"a263d53aae7c911e8a7a9069f40f5f2f-415446416.ap-southeast-1.elb.amazonaws.com:3000/ws",conn_status:"disconnected"},n.handleChange=n.handleChange.bind(Object(p.a)(Object(p.a)(n))),n.handleStateChange=n.handleStateChange.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState({node_url:e})}},{key:"handleStateChange",value:function(e){this.setState(Object(h.a)({},this.state,{conn_status:e}))}},{key:"render",value:function(){var e=this.state,t=e.node_url,n=e.conn_status;return o.a.createElement("div",{className:"Dashboard"},o.a.createElement(m,{url:t,status:n,onChange:this.handleChange}),o.a.createElement(k,{url:t,onStateChange:this.handleStateChange}))}}]),t}(a.Component)),C=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(y,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(273);c.a.render(o.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[123,2,1]]]);
//# sourceMappingURL=main.60ee3a9a.chunk.js.map